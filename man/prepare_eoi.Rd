% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/parse-eoi.R
\name{prepare_eoi}
\alias{prepare_eoi}
\title{Prepare EOI Data for Archiving}
\usage{
prepare_eoi(processed_eoi_data, uos = NULL, progress_callback = NULL)
}
\arguments{
\item{processed_eoi_data}{A named list of data frames. Each name is a unit
code, and each data frame contains the processed EOI data for that unit.
Typically the output from \code{\link{process_eoi_data}}.}

\item{uos}{Optional. A character vector of unit of study codes. If provided,
only data for these units will be processed. If NULL (default), all data is processed.}

\item{progress_callback}{Optional. A function to call for progress updates.
The function should accept two parameters: current step number and total steps.
Useful for Shiny progress bars.}
}
\value{
A list of lists. Each inner list has:
\code{path}: Intended relative path in an archive (e.g., "UNIT_CODE/UNIT_CODE_data.csv").
\code{content}: File content (character string for text files, raw bytes for binary files).
\code{is_binary}: Logical flag indicating if content is binary (TRUE for PDFs, NULL/FALSE for text).
Files generated per unit: CSV data file, summary.md, HTML report, and PDF report (if Quarto available).
}
\description{
Processes a list of data frames (EOI data), generating in-memory CSV content
for each, along with summary markdown files, HTML reports, and PDF reports
(if Quarto is available). This is suitable for creating archives without disk I/O.
}
\examples{
\dontrun{
# Mock processed EOI data
mock_df_info1111 <- data.frame(surname = "Smith", preferred_units = "INFO1111")
mock_df_comp2222 <- data.frame(surname = "Doe", preferred_units = "COMP2222")
mock_processed_data <- list(
  INFO1111 = mock_df_info1111,
  COMP2222 = mock_df_comp2222
)

# Prepare data for all units
archive_content_all <- prepare_eoi(mock_processed_data)
print(length(archive_content_all)) # Expected: 4 (2 CSVs, 2 summaries)
print(sapply(archive_content_all, function(x) x$path))

# Prepare data for a specific unit
archive_content_info <- prepare_eoi(mock_processed_data, uos = "INFO1111")
print(length(archive_content_info)) # Expected: 2 (1 CSV, 1 summary for INFO1111)
print(sapply(archive_content_info, function(x) x$path))

# Example with a unit not present
archive_content_missing <- prepare_eoi(mock_processed_data, uos = "PHYS1001")
print(length(archive_content_missing)) # Expected: 0
}
}
